!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JitsiMeetExternalAPI=t():e.JitsiMeetExternalAPI=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/libs/",t(0)}([function(e,t,n){(function(t){"use strict";function o(e,t){e.send(t)}function i(e,t,n){return t in d?void o(e,{method:"jitsiSystemMessage",params:{type:"eventStatus",name:d[t],value:n}}):void s.error("Not supported event name.")}function r(e,t,n,o,i,r,s,f){if((!n||n<l)&&(n=l),(!o||o<h)&&(o=h),this.parentNode=null,i)this.parentNode=i;else{var d=document.scripts[document.scripts.length-1];this.parentNode=d.parentNode}this.iframeHolder=this.parentNode.appendChild(document.createElement("div")),this.iframeHolder.id="jitsiConference"+u,n&&(this.iframeHolder.style.width=n+"px"),o&&(this.iframeHolder.style.height=o+"px"),this.frameName="jitsiConferenceFrame"+u,this.url=f?"http":"https://"+e+"/",t&&(this.url+=t),this.url+="#jitsi_meet_external_api_id="+u;var p;if(r)for(p in r)r.hasOwnProperty(p)&&"string"==typeof p&&(this.url+="&config."+p+"="+r[p]);if(s)for(p in s)s.hasOwnProperty(p)&&"string"==typeof p&&(this.url+="&interfaceConfig."+p+"="+s[p]);this.frame=document.createElement("iframe"),this.frame.src=this.url,this.frame.name=this.frameName,this.frame.id=this.frameName,this.frame.width="100%",this.frame.height="100%",this.frame.setAttribute("allowFullScreen","true"),this.frame=this.iframeHolder.appendChild(this.frame),this.postis=a({window:this.frame.contentWindow,scope:"jitsi_meet_external_api_"+u}),this.eventHandlers={},u++}var s=n(3).getLogger(t),a=n(4),l=790,h=300,u=0,f={displayName:"display-name",toggleAudio:"toggle-audio",toggleVideo:"toggle-video",toggleFilmStrip:"toggle-film-strip",toggleChat:"toggle-chat",toggleContactList:"toggle-contact-list",toggleShareScreen:"toggle-share-screen",hangup:"video-hangup"},d={participantKicked:"participant-kicked",incomingMessage:"incoming-message",outgoingMessage:"outgoing-message",displayNameChange:"display-name-change",participantJoined:"participant-joined",participantLeft:"participant-left",videoConferenceJoined:"video-conference-joined",videoConferenceLeft:"video-conference-left",readyToClose:"video-ready-to-close"};r.prototype.executeCommand=function(e,t){if(!(e in f))return void s.error("Not supported command name.");var n=t;n||(n=[]),o(this.postis,{method:f[e],params:n})},r.prototype.executeCommands=function(e){for(var t in e)this.executeCommand(t,e[t])},r.prototype.addEventListeners=function(e){for(var t in e)this.addEventListener(t,e[t])},r.prototype.addEventListener=function(e,t){return e in d?(e in this.eventHandlers||this.postis.listen(d[e],function(t){e in this.eventHandlers&&"function"==typeof this.eventHandlers[e]&&this.eventHandlers[e].call(null,t)}.bind(this)),this.eventHandlers[e]=t,void i(this.postis,e,!0)):void s.error("Not supported event name.")},r.prototype.removeEventListener=function(e){return e in this.eventHandlers?(delete this.eventHandlers[e],void i(this.postis,e,!1)):void s.error("The event "+e+" is not registered.")},r.prototype.removeEventListeners=function(e){for(var t=0;t<e.length;t++)this.removeEventListener(e[t])},r.prototype.dispose=function(){this.postis.destroy();var e=document.getElementById(this.frameName);e&&(e.src="about:blank");var t=this;window.setTimeout(function(){t.iframeHolder.removeChild(t.frame),t.iframeHolder.parentNode.removeChild(t.iframeHolder)},10)},e.exports=r}).call(t,"modules/API/external/external_api.js")},function(e,t){function n(){var e={methodName:"",fileLocation:"",line:null,column:null},t=new Error,n=t.stack?t.stack.split("\n"):[];if(!n||n.length<1)return e;var o=null;return n[3]&&(o=n[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!o||o.length<=4?(0===n[2].indexOf("log@")?e.methodName=n[3].substr(0,n[3].indexOf("@")):e.methodName=n[2].substr(0,n[2].indexOf("@")),e):(e.methodName=o[1],e.fileLocation=o[2],e.line=o[3],e.column=o[4],e)}function o(){var e=arguments[0],t=arguments[1],o=Array.prototype.slice.call(arguments,2);if(!(r[t]<e.level))for(var i=n(),a=s.concat(e.transports),l=0;l<a.length;l++){var h=a[l],u=h[t];u&&"function"==typeof u&&u.bind(h,e.id?"["+e.id+"]":"","<"+i.methodName+">: ").apply(h,o)}}function i(e,t,n,i){this.id=t,this.format=i,this.transports=n,this.transports||(this.transports=[]),this.level=r[e];for(var s=Object.keys(r),a=0;a<s.length;a++)this[s[a]]=o.bind(null,this,s[a])}var r={trace:0,debug:1,info:2,log:3,warn:4,error:5};i.consoleTransport=console;var s=[i.consoleTransport];i.addGlobalTransport=function(e){s.indexOf(e)===-1&&s.push(e)},i.removeGlobalTransport=function(e){var t=s.indexOf(e);t!==-1&&s.splice(t,1)},i.prototype.setLevel=function(e){this.level=r[e]},e.exports=i,i.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},function(e,t,n){function o(e,t){this.logStorage=e,this.stringifyObjects=!(!t||!t.stringifyObjects)&&t.stringifyObjects,this.storeInterval=t&&t.storeInterval?t.storeInterval:3e4,this.maxEntryLength=t&&t.maxEntryLength?t.maxEntryLength:1e4,Object.keys(i.levels).forEach(function(e){var t=i.levels[e];this[t]=function(e){this._log.apply(this,arguments)}.bind(this,e)}.bind(this)),this.storeLogsIntervalID=null,this.queue=[],this.totalLen=0,this.outputCache=[]}var i=n(1);o.prototype.stringify=function(e){try{return JSON.stringify(e)}catch(e){return"[object with circular refs?]"}},o.prototype.formatLogMessage=function(e){for(var t="",n=1,o=arguments.length;n<o;n++){var r=arguments[n];!this.stringifyObjects&&e!==i.levels.ERROR||"object"!=typeof r||(r=this.stringify(r)),t+=r,n!=o-1&&(t+=" ")}return t.length?t:null},o.prototype._log=function(){var e=this.formatLogMessage.apply(this,arguments);if(e){var t=this.queue.length?this.queue[this.queue.length-1]:void 0,n="object"==typeof t?t.text:t;n==e?"object"==typeof t?t.count+=1:this.queue[this.queue.length-1]={text:e,count:2}:(this.queue.push(e),this.totalLen+=e.length)}this.totalLen>=this.maxEntryLength&&this._flush(!0,!0)},o.prototype.start=function(){this._reschedulePublishInterval()},o.prototype._reschedulePublishInterval=function(){this.storeLogsIntervalID&&(window.clearTimeout(this.storeLogsIntervalID),this.storeLogsIntervalID=null),this.storeLogsIntervalID=window.setTimeout(this._flush.bind(this,!1,!0),this.storeInterval)},o.prototype.flush=function(){this._flush(!1,!0)},o.prototype._flush=function(e,t){this.totalLen>0&&(this.logStorage.isReady()||e)&&(this.logStorage.isReady()?(this.outputCache.length&&(this.outputCache.forEach(function(e){this.logStorage.storeLogs(e)}.bind(this)),this.outputCache=[]),this.logStorage.storeLogs(this.queue)):this.outputCache.push(this.queue),this.queue=[],this.totalLen=0),t&&this._reschedulePublishInterval()},o.prototype.stop=function(){this._flush(!1,!1)},e.exports=o},function(e,t,n){var o=n(1),i=n(2),r={},s=[],a=o.levels.TRACE;e.exports={addGlobalTransport:function(e){o.addGlobalTransport(e)},removeGlobalTransport:function(e){o.removeGlobalTransport(e)},getLogger:function(e,t,n){var i=new o(a,e,t,n);return e?(r[e]=r[e]||[],r[e].push(i)):s.push(i),i},setLogLevelById:function(e,t){for(var n=t?r[t]||[]:s,o=0;o<n.length;o++)n[o].setLevel(e)},setLogLevel:function(e){a=e;for(var t=0;t<s.length;t++)s[t].setLevel(e);for(var n in r){var o=r[n]||[];for(t=0;t<o.length;t++)o[t].setLevel(e)}},levels:o.levels,LogCollector:i}},function(e,t){function n(e){var t,n=e.scope,o=e.window,i=e.windowForEventListening||window,r={},s=[],a={},l=!1,h="__ready__",u=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var o=r[t.method];if(o)for(var i=0;i<o.length;i++)o[i].call(null,t.params);else a[t.method]=a[t.method]||[],a[t.method].push(t.params)}};i.addEventListener("message",u,!1);var f={listen:function(e,t){r[e]=r[e]||[],r[e].push(t);var n=a[e];if(n)for(var o=r[e],i=0;i<o.length;i++)for(var s=0;s<n.length;s++)o[i].call(null,n[s]);delete a[e]},send:function(e){var t=e.method;(l||e.method===h)&&o&&"function"==typeof o.postMessage?o.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):s.push(e)},ready:function(e){l?e():setTimeout(function(){f.ready(e)},50)},destroy:function(e){clearInterval(t),l=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",u),e&&e()}},d=+new Date+Math.random()+"";return t=setInterval(function(){f.send({method:h,params:d})},50),f.listen(h,function(e){if(e===d){clearInterval(t),l=!0;for(var n=0;n<s.length;n++)f.send(s[n]);s=[]}else f.send({method:h,params:e})}),f}e.exports=n}])});
//# sourceMappingURL=external_api.min.map